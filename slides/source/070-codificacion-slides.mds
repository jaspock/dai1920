% Codificaci√≥n de caracteres
% Desarrollo de Aplicaciones en Internet
%

## Codificaci√≥n de caracteres

Desarrollo de Aplicaciones en Internet

## Introducci√≥n

- Los caracteres tanto en memoria como en otros dispositivos de almacenamiento se representan como secuencias de bits
- Un fichero de texto con una sola letra 'a' ocupa 1 byte
- Si el fichero es binario (documento de un procesador de textos, por ejemplo) puede ocupar mucho m√°s


## US-ASCII

- El est√°ndar US-ASCII (tambi√©n conocido como ASCII, American Standard Code for Information Interchange) representa cada car√°cter mediante 7 bits
- Su origen se remota a la d√©cada de 1960
- Se decidi√≥ usar 7 bits porque eran suficientes para representar los 128 caracteres deseados y tambi√©n para reducir el coste de la transmisi√≥n

## US-ASCII

<div style="width:700px; margin: 0 auto;">
![](https://upload.wikimedia.org/wikipedia/commons/c/cf/USASCII_code_chart.png)
</div>

## ISO/IEC 8859

- Una serie de est√°ndares de codificaci√≥n de caracteres de 8 bits (256 caracteres diferentes)
- 15 codificaciones de caracteres para diferentes lenguajes
- Los 128 primeros caracteres (0-127) son compatibles con US-ASCII
- Si no permitimos el cambio de la codificaci√≥n de caracteres en mitad de un documento, no es posible mezclar textos en espa√±ol y ruso, por ejemplo
- Como los ficheros de texto no indican la codificaci√≥n que usan, es necesario indicarla expl√≠citamente a un editor de textos, por ejemplo

## ISO/IEC 8859-1 (Latin 1)

- Ingl√©s, alem√°n, irland√©s, island√©s, portugu√©s, franc√©s, catal√°n, noruego...

<div style="width:500px; margin: 0 auto;">
![](https://www.charset.org/img/charsets/iso-8859-1.gif)
</div>

## ISO/IEC 8859-15

- A√±ade a ISO/IEC 8859-1 el s√≠mbolo del euro y alg√∫n otro como la ligadura '≈ì' del franc√©s (con ISO/IEC 8859-1 se escriben como 'oe')

## ISO/IEC 8859-2

- Bosnio, croata, checo, eslovaco, h√∫ngaro, serbio...

<div style="width:500px; margin: 0 auto;">
![](https://www.charset.org/img/charsets/iso-8859-2.gif)
</div>

## ISO/IEC 8859-5

- Ruso, bielorruso, macedonio, serbio, b√∫lgaro...

<div style="width:500px; margin: 0 auto;">
![](https://www.charset.org/img/charsets/iso-8859-5.gif)
</div>

## Otras codificaciones

- Algunos sistemas operativos inclu√≠an codificaciones alternativas (Windows-1252, por ejemplo)

## Unicode

- Est√°ndar del Unicode Consortium que intenta reemplazar a todos los anteriores y permite entornos pluriling√ºes
- Cada car√°cter se identifica mediante un n√∫mero o punto de c√≥digo
- Los puntos de c√≥digo no cambian, pero hay diferentes codificaciones: UTF-8, UTF-16, UTF-32, etc.
- El est√°ndar Unicode permite 1.114.112 puntos de c√≥digo
- Actualmente est√°n asignados unos 140.000, incluyendo emojis ('ü•ò', U+1F958), caracteres de alfabetos antiguos, etc.

## Codificaciones de caracteres de Unicode

- UTF-8 es la m√°s usada en la web: 1 byte para los primeros 128 puntos de c√≥digo (iguales a los de US-ASCII) y hasta 4 para los restantes
- UTF-16: 2 o 4 bytes por car√°cter
- UTF-32: 4 bytes por car√°cter

## C√≥mo usar Unicode

- Usar un editor de texto que lo soporte (suele ser la opci√≥n por defecto hoy en d√≠a)
- Usar un lenguaje de programaci√≥n que lo soporte (muchos lo hacen de forma nativa)
- Usar un tipo de letra adecuado (ning√∫n tipo de letra soporta todos los caracteres de Unicode)

## Programar con caracteres de Unicode

~~~
   var Omega = 'Œ©';
   var Omega = '\u03A9';  // compatible con cualquier entorno
~~~

~~~
  public static void main(final String[] args) {
    String ·ÄÜ·ÄÜ·ÄÜ = "·Äô·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Ä±·Ä¨·ÄÑ·Ä∫";  // caracteres de lenguas de la Rep√∫blica de la Uni√≥n de Myanmar
    System.out.println("·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·Ä±·Ä¨·Äî·Ä±.·Äï·Ä´ " + ·ÄÜ·ÄÜ·ÄÜ);
  }
~~~

## Entidades de HTML

- En desuso
- Permiten representar algunos caracteres que no son US-ASCII dentro de un documento HTML
- El car√°cter '√É' se puede representar como uno de los siguientes:

~~~
  &#195;
  &#xC3;
  &Atilde;
~~~

## Ejemplos de representaciones de caracteres

- El car√°cter 'a' (LATIN SMALL LETTER A, U+0061) en US-ASCII es 01100001 (61 en hexadecimal), la misma que en los ISO/IEC 8859 y que en UTF-8; en UTF-16 es
11111110 11111111 00000000 01100001 (FEFF0061)
- El car√°cter '√É' se representa en ISO/IEC 8859-15 como C3
- El car√°cter '¬°' se representa en ISO/IEC 8859-15 como A1
- El car√°cter '√°' (LATIN SMALL LETTER A WITH ACUTE, U+00E1) se representa en ISO/IEC 8859-15 como E1 y en UTF-8 como C3A1

## Ejemplos de representaciones de caracteres /2

- ¬øC√≥mo se ve un fichero de texto en UTF-8 que contiene *guaran√°* en un editor de texto configurado para ISO/IEC 8859-15? ¬øY al rev√©s?

## UTF-8 en p√°ginas web

- Configurar el servidor para que informe al cliente de que la codificaci√≥n es UTF-8
- A√±adir a la petici√≥n y a la respuesta la cabecera HTTP:

~~~
  Content-Type: text/html; charset=utf-8
~~~

- Indicar la codificaci√≥n en el *head* del documento HTML:

~~~
  <meta charset="utf-8">
~~~

o antiguamente:

~~~
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
~~~
